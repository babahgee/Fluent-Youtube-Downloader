(()=>{"use strict";var __webpack_modules__={251:function(){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nconst urlInputField = document.querySelector("#input-url"), urlSubmitButton = document.querySelector("#button-enter"), resultsContainer = document.querySelector("#convert-results");\r\nfunction submitVideoRequest(url) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (url.length === 0)\r\n            return;\r\n        if (!(url.startsWith("http") || url.startsWith("https")))\r\n            return;\r\n        clearInputField();\r\n        const response = yield fetch("/rest/video-details", {\r\n            body: JSON.stringify({ url }),\r\n            method: "POST",\r\n            headers: {\r\n                "Content-Type": "application/json"\r\n            }\r\n        });\r\n        const json = yield response.json();\r\n        if (!json.videoDetails)\r\n            return;\r\n        createResultDom(json.videoDetails);\r\n    });\r\n}\r\nfunction createResultDom(videoDetails) {\r\n    var _a, _b;\r\n    if (resultsContainer === null)\r\n        return;\r\n    const mainElement = document.createElement("div");\r\n    mainElement.className = "convert-results__result";\r\n    mainElement.innerHTML = `\r\n\t\t<div class="convert-results__result__thumbnail">\r\n\t\t\t<img src="${(_a = videoDetails.thumbnails.pop()) === null || _a === void 0 ? void 0 : _a.url}" alt="${videoDetails === null || videoDetails === void 0 ? void 0 : videoDetails.title}" />\r\n\t\t</div>\r\n\t\t<div class="convert-results__result__info">\r\n\t\t\t<div class="convert-results__result__info__title">${videoDetails.title}</div>\r\n\t\t\t<div class="convert-results__result__info__author"><img src="${(_b = videoDetails.author.thumbnails.pop()) === null || _b === void 0 ? void 0 : _b.url}" alt="Author" />${videoDetails.author.user} - ${videoDetails.author.subscriber_count} subscribers</div>\r\n\t\t\t<div class="convert-results__result__info__description">${videoDetails.description}</div>\r\n\t\t\t<div class="convert-results__result__info__button">Convert</div>\r\n\t\t\t<div class="convert-results__result__info__button">Info</div>\r\n\t\t</div>\r\n\t`;\r\n    resultsContainer.appendChild(mainElement);\r\n}\r\nfunction clearInputField() {\r\n    if (urlInputField === null)\r\n        return;\r\n    return urlInputField.innerText = "";\r\n}\r\nfunction handleInputField(event) {\r\n    if (urlInputField === null)\r\n        return;\r\n    const inputContent = urlInputField.innerText;\r\n    if (event.keyCode === 13) {\r\n        submitVideoRequest(inputContent);\r\n        event.preventDefault();\r\n    }\r\n}\r\nfunction disableDivEditing(event) {\r\n    event.preventDefault();\r\n    if (event.clipboardData === null)\r\n        return;\r\n    const clipbardData = event.clipboardData;\r\n    var text = event.clipboardData.getData(\'text/plain\');\r\n    document.execCommand(\'insertText\', false, text);\r\n}\r\nurlSubmitButton === null || urlSubmitButton === void 0 ? void 0 : urlSubmitButton.addEventListener("click", function () {\r\n    if (urlInputField === null)\r\n        return;\r\n    submitVideoRequest(urlInputField.innerText);\r\n});\r\nurlInputField === null || urlInputField === void 0 ? void 0 : urlInputField.addEventListener("keydown", handleInputField);\r\nurlInputField === null || urlInputField === void 0 ? void 0 : urlInputField.addEventListener("paste", disableDivEditing);\r\n\n\n//# sourceURL=webpack://fluent-youtube-downloader/./application/scripts/controllers/convert.ts?')}},__webpack_exports__={};__webpack_modules__[251]()})();